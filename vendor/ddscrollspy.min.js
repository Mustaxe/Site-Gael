if(!Array.prototype.filter){Array.prototype.filter=function(b){if(this==null){throw new TypeError()}var f=Object(this);var a=f.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=[];var d=arguments[1];for(var c=0;c<a;c++){if(c in f){var g=f[c];if(b.call(d,g,c,f)){e.push(g)}}}return e}}(function(b){var c={spytarget:window,scrolltopoffset:0,scrollbehavior:"smooth",scrollduration:500,highlightclass:"selected",mincontentheight:30};function a(e,g){var d=e[1]-e[0],f=g[1]-g[0];if((e[0]-g[0])>=0&&(e[0]-g[0])<f){return true}else{if((e[0]-g[0])<=0&&(e[0]+d)>g[0]){return true}}return false}b.fn.ddscrollSpy=function(d){var f=b(window);var e=(window.opera)?(document.compatMode=="CSS1Compat"?b("html"):b("body")):b("html,body");return this.each(function(){var n=b.extend({},c,d);var h=[],i="";var m=b(n.spytarget).eq(0);var l=b(this);function k(p){var o=p.find('a[href^="#"]');h=[];i="";o.each(function(u){var s=b(this);var q=b(s.attr("href"));var v=q.get(0);if(q.length==0){return true}s.off("click.goto").on("click.goto",function(y){if(n.spytarget==window&&(n.scrollbehavior=="jump"||!history.pushState)){window.location.hash=s.attr("href")}if(n.scrollbehavior=="smooth"||n.scrolltopoffset!=0){var x=(n.spytarget==window)?e:m;var w=(document.all&&!window.Worker)?1:0;if(n.scrollbehavior=="smooth"&&(history.pushState||n.spytarget!=window)){x.animate({scrollTop:h[u].offsettop+w},n.scrollduration,function(){if(n.spytarget==window&&history.pushState){history.pushState(null,null,s.attr("href"))}})}else{x.prop("scrollTop",h[u].offsettop+w)}y.preventDefault()}});var r=(n.spytarget==window)?q.offset().top:(v.offsetParent==n.spytarget)?v.offsetTop:v.offsetTop-n.spytarget.offsetTop;r+=n.scrolltopoffset;var t=(parseInt(q.data("spyrange"))>0)?parseInt(q.data("spyrange")):(q.outerHeight()||n.mincontentheight);h.push({$menuitem:s,$des:q,offsettop:r,height:t})})}function j(){if(i.length==1){i.removeClass(n.highlightclass)}var o=m.scrollTop();var q=m.outerHeight();var p=h.filter(function(s,r){return a([s.offsettop,s.offsettop+s.height],[o,o+q])});if(p.length>0){i=p.shift().$menuitem.addClass(n.highlightclass)}}function g(){var r=h[0].$menu;for(var q=0;q<h.length;q++){var o=h[q].$des;var s=o.get(0);var p=(n.spytarget==window)?o.offset().top:(s.offsetParent==n.spytarget)?s.offsetTop:s.offsetTop-n.spytarget.offsetTop;p+=n.scrolltopoffset;h[q].offsettop=p;h[q].height=(parseInt(o.data("spyrange"))>0)?parseInt(o.data("spyrange")):(o.outerHeight()||n.mincontentheight)}}k(l);l.on("updatespy",function(){k(l);j()});m.on("scroll resize",function(){g();j()});j();f.on("load",function(){g()})})}})(jQuery);